<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Your Cart - ElectroStore</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet" />
  </head>
  <body class="d-flex flex-column min-vh-100">
    <!-- Topbar Start -->
    <div class="container-fluid">
      <div class="row align-items-center py-3 px-xl-5">
        <div class="col-lg-3 d-none d-lg-block">
          <a href="" class="text-decoration-none">
            <h1 class="m-0 display-6 font-weight-semi-bold">
              <span class="text-primary font-weight-bold border px-3 mr-1"
                >E</span
              >lectrostore
            </h1>
          </a>
        </div>

        <div class="col-lg-1">
          <a href="cart.html" class="btn border">
            <i class="fas fa-shopping-cart text-primary"></i>
            <span class="badge"></span>
          </a>
        </div>
      </div>
    </div>
    <!-- Topbar End -->

    <!-- Navbar Start -->
    <div class="container-fluid mb-3">
      <div class="row align-items-center justify-content-center">
        <div class="col-lg-11">
          <nav
            class="navbar navbar-expand-lg bg-light navbar-light py-3 py-lg-0 px-0"
          >
            <button
              type="button"
              class="navbar-toggler"
              data-toggle="collapse"
              data-target="#navbarCollapse"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div
              class="collapse navbar-collapse justify-content-between"
              id="navbarCollapse"
            >
              <div class="navbar-nav mr-auto py-0">
                <a href="index.html" class="nav-item nav-link">Home</a>
                <a href="cartpg.html" class="nav-item nav-link active"
                  >Shopping Cart</a
                >
                <a href="contact.html" class="nav-item nav-link">Contact</a>
              </div>
              <div class="navbar-nav ml-auto py-0">
                <a href="auth/login.php" class="nav-item nav-link">Login</a>
                <a href="auth/signup.php" class="nav-item nav-link">Register</a>
              </div>
            </div>
          </nav>
        </div>
      </div>
    </div>
    <!-- Navbar End -->

    <!-- ðŸ”µ ElectroStore Banner -->
    <nav class="navbar navbar-expand-lg" style="background-color: #0096d6">
      <div class="container">
        <small class="text-white-50 ms-2 me-auto"
          >Your Trusted HP Partner</small
        >
      </div>
    </nav>

    <!-- ðŸ›’ Main Content (flex-grow to fill height) -->
    <main class="flex-grow-1">
      <div class="container my-5">
        <h2>Your Shopping Cart</h2>
        <table class="table table-bordered mt-4">
          <thead class="table-light">
            <tr>
              <th>Product</th>
              <th>Price</th>
              <th>Qty</th>
              <th>Total</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="cart-items"></tbody>
        </table>

        <div class="text-end">
          <h4>Total: $<span id="cart-total">0.00</span></h4>
        </div>
      </div>
    </main>

    <!-- âš« Sticky Footer -->
    <footer class="bg-dark text-white text-center py-3 mt-auto">
      &copy; 2025 ElectroStore. All rights reserved.
    </footer>

    <!-- ðŸ§  Cart Script -->
    <script>
      function loadCart() {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        const tbody = document.getElementById("cart-items");
        let total = 0;

        tbody.innerHTML = "";
        if (cart.length === 0) {
          tbody.innerHTML = `<tr><td colspan="5" class="text-center">Your cart is empty.</td></tr>`;
          document.getElementById("cart-total").textContent = "0.00";
          return;
        }

        cart.forEach((item, index) => {
          const itemTotal = item.price * item.quantity;
          total += itemTotal;

          tbody.innerHTML += `
        <tr>
          <td>${item.name}</td>
          <td>$${item.price.toFixed(2)}</td>
          <td>
            <button onclick="updateQty(${index}, -1)" class="btn btn-sm btn-outline-secondary">-</button>
            ${item.quantity}
            <button onclick="updateQty(${index}, 1)" class="btn btn-sm btn-outline-secondary">+</button>
          </td>
          <td>$${itemTotal.toFixed(2)}</td>
          <td><button onclick="removeItem(${index})" class="btn btn-sm btn-danger">Remove</button></td>
        </tr>
      `;
        });

        document.getElementById("cart-total").textContent = total.toFixed(2);
      }

      function updateQty(index, change) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart[index].quantity += change;
        if (cart[index].quantity < 1) cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart));
        loadCart();
      }

      function removeItem(index) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart));
        loadCart();
      }

      window.onload = loadCart;
    </script>
  </body>
</html>
